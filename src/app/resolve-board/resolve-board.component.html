<div class="card" id="card">
    <div class="header">
        <div class="filterSelect titleText" tabindex="0">
            <span>filter by</span>
            <fa-icon [icon]="filterIcon"></fa-icon>
            <div class="fieldGroup">
                <input type="text" placeholder="Search">
                <ttnd-dropdown heading="Search Field" class="dropdown" [options]="searchOptions"></ttnd-dropdown>
            </div>
            <ttnd-dropdown class="dropdown" heading="Department" [options]="departmentOptions"></ttnd-dropdown>
            <ttnd-dropdown class="dropdown" heading="Status" [options]="statusOptions"></ttnd-dropdown>
        </div>
        <h5>
            your complaints
        </h5>
    </div>
    <table class="table">
        <tr>
            <th>
                department
                <fa-icon [icon]="sortIcon"></fa-icon>
            </th>
            <th>issue id</th>
            <th>locked by</th>
            <th>assigned to</th>
            <th>status</th>
        </tr>
        <tr *ngFor="let complaint of complaints">
            <td>{{complaint.department}}</td>
            <td>
                <a>{{complaint.issueId}}</a>
            </td>
            <td>{{complaint.lockedBy}}</td>
            <td>{{complaint.assignedTo}}</td>
            <!-- <td [ngClass]="{open: complaint.status === 'Open', 
                        inProgress: complaint.status === 'In Progress', 
                        resolved: complaint.status === 'Resolved'}"> -->
            <td>
                <ttnd-dropdown (click)="getClickedElementRef($event)" [options]="statusOptions"
                    [select]="currentComplaintStatus(complaint.status)" (selectChanged)="getDropdownValue($event, complaint._id)">
                </ttnd-dropdown>
            </td>
        </tr>
    </table>
    <div class="popupBg" *ngIf="timePopupVisible"></div>
    <form (ngSubmit)="updateEstimatedTime(form)" *ngIf="timePopupVisible" class="timeInputs" [ngStyle]="timePopupPosition" #form="ngForm">
        <h6>
            estimated time to resolution
        </h6>
        <div class="formElementGroup">
            <input ngModel name="duration" type="number" placeholder="Count" required>
            <ttnd-dropdown class="formDropdown" placeholder="Type" [bordered]="true" (selectChanged)="timeType($event)"
                [options]="[['hours', 'hours'], ['days', 'days'], ['weeks', 'weeks'], ['months', 'months']]"></ttnd-dropdown>
        </div>
        <button type="submit" class="submit" [disabled]="!estimatedTimeType || !form.valid">
            <fa-icon [icon]="rightArrowIcon"></fa-icon>
        </button>
    </form>
</div>