<div class="card" id="card">
    <div class="header">
        <h5>
            your complaints
        </h5>
        <div class="filterSelect titleText">
            <div class="fieldGroup">
                <input type="text" placeholder="Search">
                <ttnd-dropdown heading="Search Field" class="dropdown" [options]="searchOptions"></ttnd-dropdown>
            </div>
            <ttnd-dropdown [bordered]=true class="dropdown ml-1" placeholder="Department" [options]="departmentOptions">
            </ttnd-dropdown>
            <ttnd-dropdown [bordered]=true class="dropdown ml-1" placeholder="Status" [options]="statusOptions">
            </ttnd-dropdown>
            <a class="filterControl green" title="Apply filters">
                <fa-icon [icon]="tickIcon"></fa-icon>
            </a>
            <a class="filterControl red" title="Reset filters">
                <fa-icon [icon]="resetIcon"></fa-icon>
            </a>
        </div>
    </div>
    <table class="table">
        <tr>
            <th>
                department
                <fa-icon [icon]="sortIcon"></fa-icon>
            </th>
            <th>issue id</th>
            <th>locked by</th>
            <th>assigned to</th>
            <th>status</th>
        </tr>
        <tr *ngFor="let complaint of complaints">
            <td>{{complaint.department}}</td>
            <td>
                <a>{{complaint.issueId}}</a>
            </td>
            <td>{{complaint.lockedBy}}</td>
            <td>{{complaint.assignedTo}}</td>
            <td>
                <ttnd-dropdown (click)="getClickedElementRef($event)" [options]="statusOptions"
                    [select]="currentComplaintStatus(complaint.status)"
                    (selectChanged)="getDropdownValue($event, complaint._id)">
                </ttnd-dropdown>
            </td>
        </tr>
    </table>
    <div class="popupBg" *ngIf="timePopupVisible"></div>
    <form (ngSubmit)="updateEstimatedTime(form)" *ngIf="timePopupVisible" class="timeInputs"
        [ngStyle]="timePopupPosition" #form="ngForm">
        <h6>
            estimated time to resolution
        </h6>
        <div class="formElementGroup">
            <input ngModel name="duration" type="number" placeholder="Count" required>
            <ttnd-dropdown class="formDropdown" placeholder="Type" [bordered]="true" (selectChanged)="timeType($event)"
                [options]="[['hours', 'hours'], ['days', 'days'], ['weeks', 'weeks'], ['months', 'months']]">
            </ttnd-dropdown>
        </div>
        <button type="submit" class="submit" [disabled]="!estimatedTimeType || !form.valid">
            <fa-icon [icon]="rightArrowIcon"></fa-icon>
        </button>
    </form>
</div>